{"version":3,"sources":["webpack:///D:/WeChat/文件备份/WeChat Files/wxid_19c3c5m8aigw12/FileStorage/File/2025-06/uni-app/pages/activity/poster-poster/index.vue?af4c","webpack:///D:/WeChat/文件备份/WeChat Files/wxid_19c3c5m8aigw12/FileStorage/File/2025-06/uni-app/pages/activity/poster-poster/index.vue?a191","webpack:///D:/WeChat/文件备份/WeChat Files/wxid_19c3c5m8aigw12/FileStorage/File/2025-06/uni-app/pages/activity/poster-poster/index.vue?5970","webpack:///D:/WeChat/文件备份/WeChat Files/wxid_19c3c5m8aigw12/FileStorage/File/2025-06/uni-app/pages/activity/poster-poster/index.vue?335a","uni-app:///pages/activity/poster-poster/index.vue","webpack:///D:/WeChat/文件备份/WeChat Files/wxid_19c3c5m8aigw12/FileStorage/File/2025-06/uni-app/pages/activity/poster-poster/index.vue?7b25","webpack:///D:/WeChat/文件备份/WeChat Files/wxid_19c3c5m8aigw12/FileStorage/File/2025-06/uni-app/pages/activity/poster-poster/index.vue?f4cb","uni-app:///main.js"],"names":["components","zbCode","mixins","props","comType","type","default","comId","comBargain","data","canvasStatus","posterImage","parameter","navbar","return","title","color","class","id","bargain","image","from","uid","codeShow","cid","ifShow","val","size","unit","background","foreground","pdground","icon","iconsize","lv","onval","loadMake","src","codeSrc","wd","hg","posterBag","mpUrl","onLoad","uni","tab","url","mounted","createSelectorQuery","in","select","boundingClientRect","exec","setTimeout","onReady","selector","fields","methods","getPosterInfo","that","userData","mask","then","resData","catch","arr","routineCode","res","downloadFilestoreImage","success","resolve","fail","setDomain","imgToBase","code","downloadImg","savePosterPathMp","scope","filePath","qrR","savePosterPath","wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkH;AAClH;AACyD;AACL;AACa;;;AAGjE;AAC2N;AAC3N,gBAAgB,gNAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,gFAAM;AACR,EAAE,yFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,oFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACjBA;AAAA;AAAA;AAAA;AAA03B,CAAgB,8xBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;ACoC94B;AACA;AAIA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA,eACA;EACAA;IACAC;EACA;EACAC;EACA;EACAC;IACAC;MACAC;MACAC;IACA;IACAC;MACAF;MACAC;IACA;IACAE;MACAH;MACAC;IACA;EACA;EACAG;IACA;MACAC;MACAC;MACAC;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;MACAZ;MACAa;MACAC;MACAC;MACAC;MACAC;MACA;MACAC;MACAC;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACA;MAEA;MAMA;MACA;QACA;QACA;QACA;UACA;UACAC;YACA7B;UACA;QACA;UACA6B;YACA7B;UACA;QACA;MACA;QACA,gBACA;UACAA;UACAiB;QACA,GACA;UACAa;UACAC;QACA,EACA;MACA;IACA;EACA;EACAC;IAAA;IACA;MAEA;MAMA;MACAH;QACA7B;MACA;MACA;MACA;MACA;MAUA;QACA6B,IACAI,sBACAC,UACAC,mBACAC;UACA;UACA;QACA,GACAC;MACA;MACA;MACAC;QACA;MACA;IACA;EACA;EACAC;IACA;MAiBAD;MACA;QAAA;QACA;QACAE,SACAC,OACA;UACA7B;QACA,GACA;UACA;UACA;UACA;QACA,EACA,CACAyB;MACA;MACA;IACA;EACA;EACAK;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACAC,eACAb;gBACArC;kBACAS;kBACAG;gBACA;gBAAA;gBAAA,OACA;cAAA;gBAAAuC;gBACA;gBAEAhB;kBACA7B;kBACA8C;gBACA;gBAAA,MACAF;kBAAA;kBAAA;gBAAA;gBAAA;gBAAA,OACA,6CACAG;kBACAC;gBACA,GACAC;kBACAL;oBACA5C;kBACA;kBACA;gBACA;cAAA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA,OAEA,iDACA+C;kBACAC;gBACA,GACAC;kBACAL;oBACA5C;kBACA;kBACA;gBACA;cAAA;gBAQAgD;gBAAA,KACAA;kBAAA;kBAAA;gBAAA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;cAAA;gBAAA;cAAA;gBAAArB;gBAAA,cACA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAAAuB;gBAEA;kBACAN;oBACA;oBACA;kBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACAO;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OACA;cAAA;gBAAAC;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACA;IACAC;MAAA;MACA;QACA;QACAxB;UACAE;UACAuB;YACAC;UACA;UACAC;YACA;cACAxD;YACA;UACA;QACA;MACA;IACA;IACA;IACAyD;MACA1B;MACA;MACA,kDACA;IACA;IACA2B;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OACA;kBACArD;kBACAsD;gBACA;cAAA;gBAHAP;gBAAA,kCAKAA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACAQ;IACAC;MACA;MAkBAhC;QACAyB;UACA;YACAzB;cACAiC;cACAR;gBACAzB;kBACAkC;kBACAT;oBACAV;sBACA5C;sBACAiB;oBACA;kBACA;kBACAuC;oBACAZ;sBACA5C;oBACA;kBACA;gBACA;cACA;cACAwD;gBACAZ;kBACA5C;gBACA;cACA;YACA;UACA;YACA6B;cACAkC;cACAT;gBACAV;kBACA5C;kBACAiB;gBACA;cACA;cACAuC;gBACAZ;kBACA5C;gBACA;cACA;YACA;UACA;QACA;MACA;IAWA;IACAgE;MACA;IACA;IAEAC;MACA;MACApC;QACAyB;UACA;YACAzB;cACAiC;cACAR;gBACAzB;kBACAkC;kBACAT;oBACAV;oBACAA;sBACA5C;sBACAiB;oBACA;kBACA;kBACAuC;oBACAZ;sBACA5C;oBACA;kBACA;gBACA;cACA;YACA;UACA;YACA6B;cACAkC;cACAT;gBACAV;gBACAA;kBACA5C;kBACAiB;gBACA;cACA;cACAuC;gBACAZ;kBACA5C;gBACA;cACA;YACA;UACA;QACA;MACA;IACA;EAEA;AACA;AAAA,2B;;;;;;;;;;;;;ACpbA;AAAA;AAAA;AAAA;AAA6vC,CAAgB,ylCAAG,EAAC,C;;;;;;;;;;;ACAjxC;AACA,OAAO,KAAU,EAAE,kBAKd;;;;;;;;;;;;;;;;ACNL;AAGA;AACA;AAHA;AACAkE,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,cAAI,CAAC,C","file":"pages/activity/poster-poster/index.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=315573ee&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../../../../download/HBuilderX.4.36.2024112817/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/activity/poster-poster/index.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../../../../download/HBuilderX.4.36.2024112817/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../../../../download/HBuilderX.4.36.2024112817/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../../../../../download/HBuilderX.4.36.2024112817/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../../../../download/HBuilderX.4.36.2024112817/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../../../../download/HBuilderX.4.36.2024112817/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../../download/HBuilderX.4.36.2024112817/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=315573ee&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var m0 = _vm.$t(\"提示：点击图片即可保存至手机相册\")\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        m0: m0,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../../../../download/HBuilderX.4.36.2024112817/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../../../download/HBuilderX.4.36.2024112817/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../../../../../download/HBuilderX.4.36.2024112817/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../../../download/HBuilderX.4.36.2024112817/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../../download/HBuilderX.4.36.2024112817/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../../../../download/HBuilderX.4.36.2024112817/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../../../download/HBuilderX.4.36.2024112817/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../../../../../download/HBuilderX.4.36.2024112817/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../../../download/HBuilderX.4.36.2024112817/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../../download/HBuilderX.4.36.2024112817/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","<template>\n\t<view class=\"posterCon\" :style=\"colorStyle\">\n\t\t<view class=\"poster-poster\">\n\t\t\t<view class=\"tip\">\n\t\t\t\t<text class=\"iconfont icon-shuoming\"></text>\n\t\t\t\t{{ $t(`提示：点击图片即可保存至手机相册`) }}\n\t\t\t</view>\n\t\t\t<view class=\"pictrue\">\n\t\t\t\t<!-- <image :src='image' mode=\"widthFix\"></image> -->\n\t\t\t\t<image class=\"canvas\" :src=\"posterImage\" v-if=\"posterImage\" @click=\"savePosterPathMp(posterImage)\"></image>\n\t\t\t\t<canvas class=\"canvas\" canvas-id=\"myCanvas\" v-else></canvas>\n\t\t\t</view>\n\t\t</view>\n\t\t<!-- #ifdef H5 || APP-PLUS -->\n\t\t<zb-code\n\t\t\tref=\"qrcodes\"\n\t\t\t:show=\"codeShow\"\n\t\t\t:cid=\"cid\"\n\t\t\t:val=\"val\"\n\t\t\t:size=\"size\"\n\t\t\t:unit=\"unit\"\n\t\t\t:background=\"background\"\n\t\t\t:foreground=\"foreground\"\n\t\t\t:pdground=\"pdground\"\n\t\t\t:icon=\"icon\"\n\t\t\t:iconSize=\"iconsize\"\n\t\t\t:onval=\"onval\"\n\t\t\t:loadMake=\"loadMake\"\n\t\t\t@result=\"qrR\"\n\t\t/>\n\t\t<!-- #endif -->\n\t</view>\n</template>\n\n<script>\nimport zbCode from '@/components/zb-code/zb-code.vue';\nimport { getBargainPoster, getCombinationPoster, getBargainPosterData, getCombinationPosterData } from '@/api/activity.js';\nimport { getUserInfo, imgToBase, routineCode } from '@/api/user.js';\n// #ifdef APP-PLUS\nimport { TOKENNAME, HTTP_REQUEST_URL } from '@/config/app.js';\n// #endif\nimport colors from '@/mixins/color.js';\nexport default {\n\tcomponents: {\n\t\tzbCode\n\t},\n\tmixins: [colors],\n\t// 组件使用 props 传参\n\tprops: {\n\t\tcomType: {\n\t\t\ttype: String,\n\t\t\tdefault: '0'\n\t\t},\n\t\tcomId: {\n\t\t\ttype: String,\n\t\t\tdefault: '0'\n\t\t},\n\t\tcomBargain: {\n\t\t\ttype: String,\n\t\t\tdefault: '0'\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tcanvasStatus: true,\n\t\t\tposterImage: '',\n\t\t\tparameter: {\n\t\t\t\tnavbar: '1',\n\t\t\t\treturn: '1',\n\t\t\t\ttitle: this.$t(`拼团海报`),\n\t\t\t\tcolor: true,\n\t\t\t\tclass: '0'\n\t\t\t},\n\t\t\ttype: 0,\n\t\t\tid: 0,\n\t\t\tbargain: 0,\n\t\t\timage: '',\n\t\t\tfrom: '',\n\t\t\tuid: '',\n\t\t\t//二维码参数\n\t\t\tcodeShow: false,\n\t\t\tcid: '1',\n\t\t\tifShow: true,\n\t\t\tval: '', // 要生成的二维码值\n\t\t\tsize: 200, // 二维码大小\n\t\t\tunit: 'upx', // 单位\n\t\t\tbackground: '#FFF', // 背景色\n\t\t\tforeground: '#000', // 前景色\n\t\t\tpdground: '#000', // 角标色\n\t\t\ticon: '', // 二维码图标\n\t\t\ticonsize: 40, // 二维码图标大小\n\t\t\tlv: 3, // 二维码容错级别 ， 一般不用设置，默认就行\n\t\t\tonval: true, // val值变化时自动重新生成二维码\n\t\t\tloadMake: true, // 组件加载完成后自动生成二维码\n\t\t\tsrc: '', // 二维码生成后的图片地址或base64\n\t\t\tcodeSrc: '',\n\t\t\twd: 0,\n\t\t\thg: 0,\n\t\t\tposterBag: '../static/posterBag.png',\n\t\t\tmpUrl: ''\n\t\t};\n\t},\n\tonLoad(options) {\n\t\tif (this.comType != 1) {\n\t\t\t// #ifdef MP\n\t\t\tthis.from = 'routine';\n\t\t\t// #endif\n\t\t\t// #ifdef H5 || APP-PLUS\n\t\t\tthis.from = 'wechat';\n\t\t\t// #endif\n\n\t\t\tvar that = this;\n\t\t\tif (options.hasOwnProperty('type') && options.hasOwnProperty('id')) {\n\t\t\t\tthis.type = options.type;\n\t\t\t\tthis.id = options.id;\n\t\t\t\tif (options.type == 1) {\n\t\t\t\t\tthis.bargain = options.bargain;\n\t\t\t\t\tuni.setNavigationBarTitle({\n\t\t\t\t\t\ttitle: that.$t(`砍价海报`)\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tuni.setNavigationBarTitle({\n\t\t\t\t\t\ttitle: that.$t(`拼团海报`)\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn app.Tips(\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: that.$t(`参数错误`),\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttab: 3,\n\t\t\t\t\t\turl: 1\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t},\n\tmounted() {\n\t\tif (this.comType == 1) {\n\t\t\t// #ifdef MP\n\t\t\tthis.from = 'routine';\n\t\t\t// #endif\n\t\t\t// #ifdef H5 || APP-PLUS\n\t\t\tthis.from = 'wechat';\n\t\t\t// #endif\n\n\t\t\tvar that = this;\n\t\t\tuni.setNavigationBarTitle({\n\t\t\t\ttitle: that.$t(`砍价海报`)\n\t\t\t});\n\t\t\tthis.type = this.comType;\n\t\t\tthis.id = this.comId;\n\t\t\tthis.bargain = this.comBargain;\n\n\t\t\t// #ifdef H5\n\t\t\tthis.val =\n\t\t\t\twindow.location.origin + '/pages/activity/goods_bargain_details/index?id=' + this.id + '&bargain=' + this.$store.state.app.uid + '&spread=' + this.$store.state.app.uid;\n\t\t\t// #endif\n\t\t\t// #ifdef APP-PLUS\n\t\t\tthis.val = HTTP_REQUEST_URL + '/pages/activity/goods_bargain_details/index?id=' + this.id + '&bargain=' + this.$store.state.app.uid + '&spread=' + this.$store.state.app.uid;\n\t\t\t// #endif\n\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tuni\n\t\t\t\t\t.createSelectorQuery()\n\t\t\t\t\t.in(this)\n\t\t\t\t\t.select('.pictrue')\n\t\t\t\t\t.boundingClientRect((data) => {\n\t\t\t\t\t\tthis.wd = data.width;\n\t\t\t\t\t\tthis.hg = data.height;\n\t\t\t\t\t})\n\t\t\t\t\t.exec();\n\t\t\t});\n\t\t\tthis.routineCode();\n\t\t\tsetTimeout((e) => {\n\t\t\t\tthis.getPosterInfo();\n\t\t\t}, 200);\n\t\t}\n\t},\n\tonReady() {\n\t\tif (this.comType != 1) {\n\t\t\t// #ifdef H5\n\t\t\tif (this.type == 1) {\n\t\t\t\tthis.val =\n\t\t\t\t\twindow.location.origin + '/pages/activity/goods_bargain_details/index?id=' + this.id + '&bargain=' + this.$store.state.app.uid + '&spread=' + this.$store.state.app.uid;\n\t\t\t} else if (this.type == 2) {\n\t\t\t\tthis.val = window.location.origin + '/pages/activity/goods_combination_status/index?id=' + this.id + '&spread=' + this.$store.state.app.uid;\n\t\t\t}\n\t\t\t// #endif\n\t\t\t// #ifdef APP-PLUS\n\t\t\tif (this.type == 1) {\n\t\t\t\tthis.val =\n\t\t\t\t\tHTTP_REQUEST_URL + '/pages/activity/goods_bargain_details/index?id=' + this.id + '&bargain=' + this.$store.state.app.uid + '&spread=' + this.$store.state.app.uid;\n\t\t\t} else if (this.type == 2) {\n\t\t\t\tthis.val = HTTP_REQUEST_URL + '/pages/activity/goods_combination_status/index?id=' + this.id + '&spread=' + this.$store.state.app.uid;\n\t\t\t}\n\t\t\t// #endif\n\t\t\tsetTimeout((e) => {}, 200);\n\t\t\tthis.$nextTick(function () {\n\t\t\t\tlet selector = uni.createSelectorQuery().select('.pictrue');\n\t\t\t\tselector\n\t\t\t\t\t.fields(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tsize: true\n\t\t\t\t\t\t},\n\t\t\t\t\t\t(data) => {\n\t\t\t\t\t\t\tthis.wd = data.width;\n\t\t\t\t\t\t\tthis.hg = data.height;\n\t\t\t\t\t\t\tthis.getPosterInfo();\n\t\t\t\t\t\t}\n\t\t\t\t\t)\n\t\t\t\t\t.exec();\n\t\t\t});\n\t\t\tthis.routineCode();\n\t\t}\n\t},\n\tmethods: {\n\t\tasync getPosterInfo() {\n\t\t\tvar that = this,\n\t\t\t\turl = '';\n\t\t\tlet data = {\n\t\t\t\tid: that.id,\n\t\t\t\tfrom: that.from\n\t\t\t};\n\t\t\tlet userData = await getUserInfo();\n\t\t\tthis.uid = userData.data.uid;\n\t\t\tlet goods_img, mp_code, resData, arr, mpUrl;\n\t\t\tuni.showLoading({\n\t\t\t\ttitle: that.$t(`海报生成中`),\n\t\t\t\tmask: true\n\t\t\t});\n\t\t\tif (that.type == 1) {\n\t\t\t\tawait getBargainPosterData(that.id)\n\t\t\t\t\t.then((res) => {\n\t\t\t\t\t\tresData = res.data;\n\t\t\t\t\t})\n\t\t\t\t\t.catch((err) => {\n\t\t\t\t\t\tthat.$util.Tips({\n\t\t\t\t\t\t\ttitle: that.$t(`海报图片获取失败`)\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn;\n\t\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tawait getCombinationPosterData(that.id)\n\t\t\t\t\t.then((res) => {\n\t\t\t\t\t\tresData = res.data;\n\t\t\t\t\t})\n\t\t\t\t\t.catch((err) => {\n\t\t\t\t\t\tthat.$util.Tips({\n\t\t\t\t\t\t\ttitle: that.$t(`海报图片获取失败`)\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn;\n\t\t\t\t\t});\n\t\t\t}\n\n\t\t\t// #ifdef H5 || APP-PLUS\n\t\t\tlet imgData = await this.imgToBase(resData.image, resData.url);\n\t\t\tarr = [this.posterBag, imgData.image, imgData.code || this.codeSrc];\n\t\t\t// #endif\n\t\t\t// #ifdef MP\n\t\t\tresData.image = that.setDomain(resData.image);\n\t\t\tmpUrl = resData.url ? await this.downloadFilestoreImage(resData.url) : await this.downloadFilestoreImage(this.mpUrl);\n\t\t\tarr = [this.posterBag, await this.downloadFilestoreImage(resData.image), mpUrl];\n\t\t\t// #endif\n\t\t\tthis.$nextTick((e) => {\n\t\t\t\tthat.$util.bargainPosterCanvas(arr, resData.title, resData.label, resData.msg, resData.price, this.wd, this.hg, (tempFilePath) => {\n\t\t\t\t\tthis.posterImage = tempFilePath;\n\t\t\t\t\tthis.$emit('getPosterImgae', tempFilePath);\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tasync routineCode() {\n\t\t\tlet res = await routineCode();\n\t\t\tthis.mpUrl = res.data.url;\n\t\t},\n\t\t//图片转符合安全域名路径\n\t\tdownloadFilestoreImage(url) {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tlet that = this;\n\t\t\t\tuni.downloadFile({\n\t\t\t\t\turl: url,\n\t\t\t\t\tsuccess: function (res) {\n\t\t\t\t\t\tresolve(res.tempFilePath);\n\t\t\t\t\t},\n\t\t\t\t\tfail: function () {\n\t\t\t\t\t\treturn that.$util.Tips({\n\t\t\t\t\t\t\ttitle: ''\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t//替换安全域名\n\t\tsetDomain: function (url) {\n\t\t\turl = url ? url.toString() : '';\n\t\t\t//本地调试打开,生产请注销\n\t\t\tif (url.indexOf('https://') > -1) return url;\n\t\t\telse return url.replace('http://', 'https://');\n\t\t},\n\t\tasync imgToBase(image, url) {\n\t\t\tlet res = await imgToBase({\n\t\t\t\timage: image,\n\t\t\t\tcode: url\n\t\t\t});\n\n\t\t\treturn res.data;\n\t\t},\n\t\tdownloadImg() {},\n\t\tsavePosterPathMp(url) {\n\t\t\tlet that = this;\n\t\t\t// #ifdef APP-PLUS\n\t\t\tuni.saveImageToPhotosAlbum({\n\t\t\t\tfilePath: url,\n\t\t\t\tsuccess: function (res) {\n\t\t\t\t\tthat.$util.Tips({\n\t\t\t\t\t\ttitle: that.$t(`保存成功`),\n\t\t\t\t\t\ticon: 'success'\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tfail: function (res) {\n\t\t\t\t\tthat.$util.Tips({\n\t\t\t\t\t\ttitle: that.$t(`保存失败`)\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t\t// #endif\n\t\t\t// #ifdef MP\n\t\t\tuni.getSetting({\n\t\t\t\tsuccess(res) {\n\t\t\t\t\tif (!res.authSetting['scope.writePhotosAlbum']) {\n\t\t\t\t\t\tuni.authorize({\n\t\t\t\t\t\t\tscope: 'scope.writePhotosAlbum',\n\t\t\t\t\t\t\tsuccess() {\n\t\t\t\t\t\t\t\tuni.saveImageToPhotosAlbum({\n\t\t\t\t\t\t\t\t\tfilePath: url,\n\t\t\t\t\t\t\t\t\tsuccess: function (res) {\n\t\t\t\t\t\t\t\t\t\tthat.$util.Tips({\n\t\t\t\t\t\t\t\t\t\t\ttitle: that.$t(`保存成功`),\n\t\t\t\t\t\t\t\t\t\t\ticon: 'success'\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tfail: function (res) {\n\t\t\t\t\t\t\t\t\t\tthat.$util.Tips({\n\t\t\t\t\t\t\t\t\t\t\ttitle: that.$t(`保存失败`)\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tfail: function (res) {\n\t\t\t\t\t\t\t\tthat.$util.Tips({\n\t\t\t\t\t\t\t\t\ttitle: that.$t(`保存失败`)\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tuni.saveImageToPhotosAlbum({\n\t\t\t\t\t\t\tfilePath: url,\n\t\t\t\t\t\t\tsuccess: function (res) {\n\t\t\t\t\t\t\t\tthat.$util.Tips({\n\t\t\t\t\t\t\t\t\ttitle: that.$t(`保存成功`),\n\t\t\t\t\t\t\t\t\ticon: 'success'\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tfail: function (res) {\n\t\t\t\t\t\t\t\tthat.$util.Tips({\n\t\t\t\t\t\t\t\t\ttitle: that.$t(`保存失败`)\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\t// #endif\n\t\t\t// #ifdef H5\n\t\t\t// 创建隐藏的可下载链接\n\t\t\tvar eleLink = document.createElement('a');\n\t\t\teleLink.download = that.$t(`海报`);\n\t\t\teleLink.href = url;\n\t\t\t// 触发点击\n\t\t\tdocument.body.appendChild(eleLink);\n\t\t\teleLink.click();\n\t\t\t// #endif\n\t\t},\n\t\tqrR(res) {\n\t\t\tthis.codeSrc = res;\n\t\t},\n\t\t// #ifdef MP\n\t\tsavePosterPath: function () {\n\t\t\tlet that = this;\n\t\t\tuni.getSetting({\n\t\t\t\tsuccess(res) {\n\t\t\t\t\tif (!res.authSetting['scope.writePhotosAlbum']) {\n\t\t\t\t\t\tuni.authorize({\n\t\t\t\t\t\t\tscope: 'scope.writePhotosAlbum',\n\t\t\t\t\t\t\tsuccess() {\n\t\t\t\t\t\t\t\tuni.saveImageToPhotosAlbum({\n\t\t\t\t\t\t\t\t\tfilePath: that.posterImage,\n\t\t\t\t\t\t\t\t\tsuccess: function (res) {\n\t\t\t\t\t\t\t\t\t\tthat.posterImageClose();\n\t\t\t\t\t\t\t\t\t\tthat.$util.Tips({\n\t\t\t\t\t\t\t\t\t\t\ttitle: that.$t(`保存成功`),\n\t\t\t\t\t\t\t\t\t\t\ticon: 'success'\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tfail: function (res) {\n\t\t\t\t\t\t\t\t\t\tthat.$util.Tips({\n\t\t\t\t\t\t\t\t\t\t\ttitle: that.$t(`保存失败`)\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tuni.saveImageToPhotosAlbum({\n\t\t\t\t\t\t\tfilePath: that.posterImage,\n\t\t\t\t\t\t\tsuccess: function (res) {\n\t\t\t\t\t\t\t\tthat.posterImageClose();\n\t\t\t\t\t\t\t\tthat.$util.Tips({\n\t\t\t\t\t\t\t\t\ttitle: that.$t(`保存成功`),\n\t\t\t\t\t\t\t\t\ticon: 'success'\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tfail: function (res) {\n\t\t\t\t\t\t\t\tthat.$util.Tips({\n\t\t\t\t\t\t\t\t\ttitle: that.$t(`保存失败`)\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t// #endif\n\t}\n};\n</script>\n\n<style>\n.posterCon {\n\tposition: fixed;\n\ttop: 0;\n\twidth: 100%;\n\tleft: 0;\n\theight: 100%;\n\tbackground-color: var(--view-theme);\n\tbottom: 0;\n\toverflow-y: auto;\n}\n\n.poster-poster .tip {\n\theight: 80rpx;\n\tfont-size: 26rpx;\n\tcolor: #e8c787;\n\ttext-align: center;\n\tline-height: 80rpx;\n\tuser-select: none;\n}\n\n.poster-poster .tip .iconfont {\n\tfont-size: 36rpx;\n\tvertical-align: -4rpx;\n\tmargin-right: 18rpx;\n}\n\n.canvas {\n\twidth: 100%;\n\theight: 1100rpx;\n}\n\n.poster-poster .pictrue {\n\twidth: 700rpx;\n\t/* height: 100%; */\n\tmargin: 0 auto 50rpx auto;\n\tdisplay: flex;\n\tjustify-content: center;\n}\n\n.poster-poster .pictrue image {\n\twidth: 100%;\n\t/* height: 100%; */\n}\n</style>\n","import mod from \"-!../../../../../../../../../../../download/HBuilderX.4.36.2024112817/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../../../../download/HBuilderX.4.36.2024112817/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../../../../../download/HBuilderX.4.36.2024112817/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../../../download/HBuilderX.4.36.2024112817/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../../../../download/HBuilderX.4.36.2024112817/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../../../../download/HBuilderX.4.36.2024112817/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../../download/HBuilderX.4.36.2024112817/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../../../../../../download/HBuilderX.4.36.2024112817/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../../../../download/HBuilderX.4.36.2024112817/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../../../../../download/HBuilderX.4.36.2024112817/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../../../download/HBuilderX.4.36.2024112817/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../../../../download/HBuilderX.4.36.2024112817/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../../../../download/HBuilderX.4.36.2024112817/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../../download/HBuilderX.4.36.2024112817/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1749452844999\n      var cssReload = require(\"D:/download/HBuilderX.4.36.2024112817/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  ","import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/activity/poster-poster/index.vue'\ncreatePage(Page)"],"sourceRoot":""}